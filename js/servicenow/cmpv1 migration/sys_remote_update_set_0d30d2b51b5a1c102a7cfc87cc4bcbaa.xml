<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2020-07-30 00:30:18">
<sys_remote_update_set action="INSERT_OR_UPDATE">
<application display_value="Global">global</application>
<application_name>Global</application_name>
<application_scope>global</application_scope>
<application_version/>
<collisions/>
<commit_date/>
<deleted/>
<description/>
<inserted/>
<name>CMPv1 Migration</name>
<origin_sys_id/>
<parent display_value=""/>
<release_date/>
<remote_base_update_set display_value=""/>
<remote_parent_id/>
<remote_sys_id>78cb2e811b9a18102a7cfc87cc4bcb7c</remote_sys_id>
<state>loaded</state>
<summary/>
<sys_class_name>sys_remote_update_set</sys_class_name>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2020-07-30 00:30:17</sys_created_on>
<sys_id>0d30d2b51b5a1c102a7cfc87cc4bcbaa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2020-07-30 00:30:17</sys_updated_on>
<update_set display_value=""/>
<update_source display_value=""/>
<updated/>
</sys_remote_update_set>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_4d6dea051b9a18102a7cfc87cc4bcb45</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;false&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;cmdb_ci_lb_service&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="cmdb_ci_lb_service"&gt;object_idLIKEamazonaws^EQ&lt;item endquery="false" field="object_id" goto="false" newquery="false" operator="LIKE" or="false" value="amazonaws"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;CMPv1 Migration 2/4&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	current.install_status = '3';

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-07-27 18:42:22&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;4d6dea051b9a18102a7cfc87cc4bcb45&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;CMPv1 Migration 2/4&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_4d6dea051b9a18102a7cfc87cc4bcb45&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-07-27 18:45:03&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=4d6dea051b9a18102a7cfc87cc4bcb45"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1192819295</payload_hash>
<remote_update_set display_value="CMPv1 Migration">0d30d2b51b5a1c102a7cfc87cc4bcbaa</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2020-07-30 00:30:17</sys_created_on>
<sys_id>0530d2b51b5a1c102a7cfc87cc4bcbab</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1739197ae790000001</sys_recorded_at>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2020-07-30 00:30:17</sys_updated_on>
<table>cmdb_ci_lb_service</table>
<target_name>CMPv1 Migration 2/4</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>e80ea285ad9a181080af0f109a38c1c6</update_guid>
<update_guid_history>e80ea285ad9a181080af0f109a38c1c6:-1192819295,416dea05f19a181012e0044874644449:981022239</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_1c993a451bda18102a7cfc87cc4bcb51</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;false&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;cmdb_ci_storage_volume&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="cmdb_ci_storage_volume"&gt;storage_type=block^EQ&lt;item endquery="false" field="storage_type" goto="false" newquery="false" operator="=" or="false" value="block"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;CMPv1 Migration 3/4&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	current.install_status = '3';

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-07-27 19:35:33&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;1c993a451bda18102a7cfc87cc4bcb51&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;CMPv1 Migration 3/4&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_1c993a451bda18102a7cfc87cc4bcb51&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-07-27 19:35:33&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=1c993a451bda18102a7cfc87cc4bcb51"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1266356641</payload_hash>
<remote_update_set display_value="CMPv1 Migration">0d30d2b51b5a1c102a7cfc87cc4bcbaa</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2020-07-30 00:30:17</sys_created_on>
<sys_id>4130d2b51b5a1c102a7cfc87cc4bcbab</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>17391c5eab20000001</sys_recorded_at>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2020-07-30 00:30:17</sys_updated_on>
<table>cmdb_ci_storage_volume</table>
<target_name>CMPv1 Migration 3/4</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>10993a45d4da1810e5dcbda9d60b2b55</update_guid>
<update_guid_history>10993a45d4da1810e5dcbda9d60b2b55:-1266356641</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_fix_a38c8e711b5a1c102a7cfc87cc4bcb86</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;&lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;&lt;active&gt;false&lt;/active&gt;&lt;before&gt;false&lt;/before&gt;&lt;description&gt;DO NOT RUN UNLESS PREP HAS BEEN COMPLETED:&amp;#13;
1. Ensure "CMPv1 Migration" BRs have been imported and activated&amp;#13;
2. Disable CMPv1 per KB: https://hi.service-now.com/kb_view.do?sysparm_article=KB0686119&amp;#13;
3. Disable/delete CMPv1 Web Services discovery schedules&amp;#13;
4. Configure and Run Cloud Discovery on all accounts to populate new tables with data and new CIs are "In Maintenance"&amp;#13;
5. Deactivate Cloud Discovery schedules&amp;#13;
6. Deactivate event connectors to avoid Alert processing from occurring while script is running&amp;#13;
&amp;#13;
SCRIPT:&amp;#13;
1. Activate CMPv1 Migration Script fix script&amp;#13;
2. Run Fix Script&amp;#13;
&amp;#13;
POST SCRIPT:&amp;#13;
1. Activate event connectors&amp;#13;
2. Deactivate "CMPv1 Migration" BRs&amp;#13;
3. Activate Cloud Discovery schedules&amp;#13;
4. Deactivate fix script&amp;#13;
5. Clean up old CMPv1 data not touched by script&amp;#13;
&amp;#13;
NOTES:&amp;#13;
- This will only run on the defined tables and CI classes (and the intercept BRs will only work for the configured tables)&amp;#13;
- This is just to ensure that all references are updated and to mitigate any contamination during migration where old/new CIs are being incorrectly set for cmdb_ci fields in given tables (e.g: Alert, Incident, Change)&amp;#13;
- Remaining old data will need to be cleaned up through normal CI staleness remediation procedures&lt;/description&gt;&lt;flush_cache&gt;false&lt;/flush_cache&gt;&lt;name&gt;CMPv1 Migration Script&lt;/name&gt;&lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;&lt;run_once&gt;true&lt;/run_once&gt;&lt;script&gt;&lt;![CDATA[gs.info("SNCDEBUG CMPv1 Migration Script STARTED");

// Set some global vars
var tables = ['em_alert','incident','change_request'];
var oldCiClasses = 'cmdb_ci_ec2_instance,cmdb_ci_aws_elb,cmdb_ci_aws_asgrp,cmdb_ci_aws_ebs_volume,cmdb_ci_aws_resource';
var newCiClasses = 'cmdb_ci_vm_instance,cmdb_ci_lb_service,cmdb_ci_storage_volume,cmdb_ci_cmp_resource';
var oldCi;
var oldCiClass;
var oldIdentifierValue;
var newClass;
var newCi;

// Iterate tables and update references
gs.info("SNCDEBUG update table references starting...");
tables.forEach(updateReferences);
gs.info("SNCDEBUG update table references completed...");

// Set new CIs to 'Installed' so they can be picked up by new alerts 
gs.info("SNCDEBUG set new Cis to Installed starting...");
var grUpdateStatusForNew = new GlideRecord('cmdb_ci');
grUpdateStatusForNew.addQuery('sys_class_name','IN',newCiClasses);
grUpdateStatusForNew.addQuery('install_status','=','3');
grUpdateStatusForNew.setValue('install_status', '1');
grUpdateStatusForNew.updateMultiple();
gs.info("SNCDEBUG set new Cis to Installed completed...");

// Set old CIs to 'Retired'
gs.info("SNCDEBUG set old Cis to Retired starting...");
var grUpdateStatusForOld = new GlideRecord('cmdb_ci');
grUpdateStatusForOld.addQuery('sys_class_name','IN',oldCiClasses);
grUpdateStatusForOld.addQuery('install_status','=','1')
grUpdateStatusForOld.setValue('install_status', '7');
grUpdateStatusForOld.updateMultiple();
gs.info("SNCDEBUG set old Cis to Retired completed...");
gs.info("SNCDEBUG CMPv1 Migration Script COMPLETE");


function updateReferences(table) {
    // Get our list of applicable records based on Ci classes
    var grTableRecords = new GlideRecord(table);
    grTableRecords.addQuery('cmdb_ci.sys_class_name','IN',oldCiClasses);
    grTableRecords.query();

    gs.info("SNCDEBUG iterate records for " + table + " starting...");

    while (grTableRecords.next()) {
        // Assign vars for clarity
        oldCi = grTableRecords.cmdb_ci;
        oldCiClass = grTableRecords.cmdb_ci.sys_class_name;
        newClass = findNewClass(oldCiClass);

        // Maybe a record was updated with a different Ci class while this ran, if so abort this loop
        if (!newClass) {
            gs.info("SNCDEBUG found an unexpected Ci class, skipping this record: " + grTableRecords.number);
            continue;
        }

        newCi = findNewCiAndUpdateStatus(newClass,oldIdentifierValue,oldCi,oldCiClass);

        // update reference in table
        if (newCi) {
            grTableRecords.cmdb_ci = newCi;
            grTableRecords.update();
        } else {
            gs.info("SNCDEBUG unable to find replacement for Ci, leaving this alone: " + grTablesRecords.number);
        }
    }
    gs.info("SNCDEBUG iterate records for " + table + " completed...");
}

function findNewClass(oldCiClass) {
    switch(oldCiClass) {
        case 'cmdb_ci_ec2_instance': 
            oldIdentifierValue = grTableRecords.cmdb_ci.object_id;
            return 'cmdb_ci_vm_instance';
        case 'cmdb_ci_aws_elb':
            oldIdentifierValue = grTableRecords.cmdb_ci.canonical_hosted_zone_name;
            return 'cmdb_ci_lb_service';
        case 'cmdb_ci_aws_ebs_volume':
            oldIdentifierValue = grTableRecords.cmdb_ci.resource_name;
            return 'cmdb_ci_storage_volume';
        case 'cmdb_ci_aws_asgrp':
            oldIdentifierValue = grTableRecords.cmdb_ci.volume_id;
            return 'cmdb_ci_cmp_resource';
        case 'cmdb_ci_aws_resource':
            oldIdentifierValue = grTableRecords.cmdb_ci.resource_id;
            return 'cmdb_ci_cmp_resource';
        default: return 'false';
    }
}

function findNewCiAndUpdateStatus(ciTable,identifier,oldRecord,oldClass) {
    var newSysId;
    var grNewCi = new GlideRecord(ciTable);
    grNewCi.addQuery('install_status','=','3');
    grNewCi.addQuery('object_id','CONTAINS',identifier);
    grNewCi.query();

    if(!grNewCi.hasNext())
        return false;
        
    if(grNewCi.getRowCount() &gt; 1)
        gs.info("SNCDEBUG found more than one record to match on Ci: " + oldRecord + " will select first record in list");
       
    // Change new CI from 'In Maintenance' to 'Installed'
    grNewCi.next();
    newSysId = grNewCi.sys_id;
    grNewCi.install_status = '1';
    grNewCi.update();

    // Change old CI from 'Installed' to 'Retired'
    var grOldCi = new GlideRecord(oldClass);
    grOldCi.get('oldRecord');
    grOldCi.install_status = '7';
    grOldCi.update();

    // Return new sys_id to update table reference
    gs.info("SNCDEBUG returning new Ci " + newSysId + " for old Ci " + oldRecord);
    return newSysId;  
}
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-07-30 00:24:13&lt;/sys_created_on&gt;&lt;sys_id&gt;a38c8e711b5a1c102a7cfc87cc4bcb86&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;CMPv1 Migration Script&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_fix_a38c8e711b5a1c102a7cfc87cc4bcb86&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-07-30 00:29:59&lt;/sys_updated_on&gt;&lt;unloadable&gt;false&lt;/unloadable&gt;&lt;/sys_script_fix&gt;&lt;/record_update&gt;</payload>
<payload_hash>-180000311</payload_hash>
<remote_update_set display_value="CMPv1 Migration">0d30d2b51b5a1c102a7cfc87cc4bcbaa</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2020-07-30 00:30:17</sys_created_on>
<sys_id>5d30d2b51b5a1c102a7cfc87cc4bcbab</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1739d20331f0000001</sys_recorded_at>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2020-07-30 00:30:17</sys_updated_on>
<table/>
<target_name>CMPv1 Migration Script</target_name>
<type>Fix Script</type>
<update_domain>global</update_domain>
<update_guid>b420d2b5005a1c10ffa97fba468f83a8</update_guid>
<update_guid_history>b420d2b5005a1c10ffa97fba468f83a8:-180000311,3cefc2b5d05a1c1003ebc4286841e9a3:-1211225870,d8de0e35ec5a1c100671eb2e6c779cc1:-172006370</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_bcdb2e811b9a18102a7cfc87cc4bcba2</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;false&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;cmdb_ci_vm_instance&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="cmdb_ci_vm_instance"&gt;object_idSTARTSWITHi-^EQ&lt;item endquery="false" field="object_id" goto="false" newquery="false" operator="STARTSWITH" or="false" value="i-"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;CMPv1 Migration 1/4&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	current.install_status = '3';

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-07-27 18:39:05&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;bcdb2e811b9a18102a7cfc87cc4bcba2&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;CMPv1 Migration 1/4&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_bcdb2e811b9a18102a7cfc87cc4bcba2&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-07-27 18:45:09&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=bcdb2e811b9a18102a7cfc87cc4bcba2"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1924865167</payload_hash>
<remote_update_set display_value="CMPv1 Migration">0d30d2b51b5a1c102a7cfc87cc4bcbaa</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2020-07-30 00:30:17</sys_created_on>
<sys_id>8930d2b51b5a1c102a7cfc87cc4bcbab</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>1739197c7580000001</sys_recorded_at>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2020-07-30 00:30:17</sys_updated_on>
<table>cmdb_ci_vm_instance</table>
<target_name>CMPv1 Migration 1/4</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>0a0ea285669a18104ab3652243d67fcd</update_guid>
<update_guid_history>0a0ea285669a18104ab3652243d67fcd:-1924865167,d9ace205a09a18100573474ec32582e5:248976367</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_script_78fdaa451b9a18102a7cfc87cc4bcbae</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;false&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;cmdb_ci_cmp_resource&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition/&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;CMPv1 Migration 4/4&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	current.install_status = '3';

})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2020-07-27 18:44:48&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;78fdaa451b9a18102a7cfc87cc4bcbae&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;CMPv1 Migration 4/4&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_78fdaa451b9a18102a7cfc87cc4bcbae&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2020-07-27 19:35:08&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;before&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=78fdaa451b9a18102a7cfc87cc4bcbae"/&gt;&lt;/record_update&gt;</payload>
<payload_hash>211878619</payload_hash>
<remote_update_set display_value="CMPv1 Migration">0d30d2b51b5a1c102a7cfc87cc4bcbaa</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2020-07-30 00:30:17</sys_created_on>
<sys_id>c530d2b51b5a1c102a7cfc87cc4bcbab</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>17391c589680000001</sys_recorded_at>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2020-07-30 00:30:17</sys_updated_on>
<table>cmdb_ci_cmp_resource</table>
<target_name>CMPv1 Migration 4/4</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_guid>1679764175da181020c9510013465ea5</update_guid>
<update_guid_history>1679764175da181020c9510013465ea5:211878619,9c36f2411eda181051d5f99303eac547:-1266356641,7cfdaa45609a1810ce89810e8713a9b1:-1495729699</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
</unload>
